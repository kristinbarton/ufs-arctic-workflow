#!/bin/sh

# Used globally
export MAIN_DIR="$(pwd)/../" # Top level directory
export RUN_DIR="$(pwd)/" # Current run directory

export CDATE=2020070200
export CDATEprior=2020070100
export NHRS=24 # Total number of forecast hours

export SACCT="ufs-artic"
export NLN="ln -s"
export APRUNS="srun --ntasks=1 --nodes=1 --ntasks-per-node=1 --cpus-per-task=2 --account=${SACCT}"
export APRUNC="srun --ntasks=6 --nodes=2 --ntasks-per-node=3 --cpus-per-task=2 --account=${SACCT}"

# Used by OCN
export OCN_SRC_GRID_NAME="mx025"
export OCN_DST_GRID_NAME="ARC12"
export OCN_CASE="ARC12"
export OCN_SRC_GRID_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/mesh_files/${OCN_SRC_GRID_NAME}/"
export OCN_DST_GRID_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/mesh_files/${OCN_DST_GRID_NAME}/input_files/"
export OCN_SRC_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/input_data/GEFSv13-reforecasts/${CDATE}/ics/"
export OCN_SCRIPT_DIR="${MAIN_DIR}/workflow/ocn"
export OCN_RUN_DIR="${RUN_DIR}/ocn"
export OCNINTYPE='gefs' # Options: rtofs or gefs 
export OCN_H_WGT_FILE="${OCNINTYPE}2arctic_h.nc"
export OCN_U_WGT_FILE="${OCNINTYPE}2arctic_u.nc"
export OCN_V_WGT_FILE="${OCNINTYPE}2arctic_v.nc"
export OCN_IC_FILE="mom6_IC.nc"
export OCN_OUT_FILE_PATH_BASE="mom6_OBC_"
export OCN_WGT_FILE_PATH_BASE="gefs2arctic_"
export OCN_ANG_FILE_PATH_BASE="ocean_hgrid_"
export OCN_HGD_FILE_PATH_BASE="ocean_hgrid_"
export OCN_FILE_TAIL=".nc"
export OCN_WGT_FILE_BASE="gefs2arctic"
export OCN_SSH_VARNAME="sfc"
export OCN_SSH_SRC_FILE="MOM.res_1.nc"
export OCN_THK_VARNAME="h"
export OCN_THK_SRC_FILE="MOM.res.nc"
export OCN_TMP_VARNAME="Temp"
export OCN_TMP_SRC_FILE="MOM.res.nc"
export OCN_SAL_VARNAME="Salt"
export OCN_SAL_SRC_FILE="MOM.res.nc"
export OCN_U_VARNAME="u"
export OCN_U_SRC_FILE="MOM.res.nc"
export OCN_V_VARNAME="v"
export OCN_V_SRC_FILE="MOM.res_1.nc"
export OCN_SRC_ANG_NAME="angle_dx"
export OCN_SRC_ANG_FILE="mx025.ocean_hgrid.nc"
export OCN_SRC_CONVERT_ANG="True"
export OCN_DST_ANG_NAME="angle_dx"
export OCN_DST_ANG_FILE="ocean_hgrid.nc"
export OCN_DST_CONVERT_ANG="True"
export OCN_SRC_VRT_FILE="mx025.ocean_vgrid.nc"
export OCN_SRC_VRT_NAME="zt"
export OCN_DST_VRT_FILE="MOM.res.nc"
export OCN_DST_VRT_NAME="Layer"
export OCN_TIME_VARNAME="Time"

export HAFSdir="/scratch4/BMC/ufs-artic/Kristin.Barton/hwrf/HAFS/"
export FIXhafs="${HAFSdir}/fix"
export PARMhafs="${HAFSdir}/parm"
export EXEChafs="${HAFSdir}/exec"
export USHhafs="${HAFSdir}/ush"
export MODhafs="${HAFSdir}/modulefiles"
export COMINrtofs="/scratch1/NCEPDEV/hwrf/noscrub/hafs-input/COMRTOFSv2"
export COMINgfs="/scratch1/NCEPDEV/hwrf/noscrub/hafs-input/COMGFSv16"

# Used by ICE
export ICE_SRC_GRID_NAME="mx025"
export ICE_DST_GRID_NAME="ARC12"
export ICEINTYPE='gefs' # Options: rtofs or gefs 

export ICE_SRC_GRID_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/mesh_files/${ICE_SRC_GRID_NAME}/"
export ICE_DST_GRID_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/mesh_files/${ICE_DST_GRID_NAME}/input_files/"
export ICE_INPUT_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/input_data/GEFSv13-reforecasts/${CDATE}/ics/"
export ICE_SCRIPT_DIR="${MAIN_DIR}/workflow/ice"
export ICE_RUN_DIR="${RUN_DIR}/ice"
export ICE_SRC_FILE="Ct.mx025_SCRIP_masked.nc"
export ICE_DST_FILE="ocean_mask.nc"
export ICE_WGT_FILE="${ICEINTYPE}2arctic_h.nc"
export ICE_SRC_ANG_NAME="angle_dx"
export ICE_SRC_ANG_FILE="mx025.ocean_hgrid.nc"
export ICE_DST_ANG_NAME="angle_dx"
export ICE_DST_ANG_FILE="ocean_hgrid.nc"

# Used by ATM
export ATM_SCRIPT_DIR="${MAIN_DIR}/workflow/atm"
export ATM_RUN_DIR="${RUN_DIR}/atm"
export FIX_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/mesh_files"
export ATM_CASE="C185"
export ATM_DATA_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/input_data/GEFSv13-reforecasts/${CDATE}"
export ATM_TILE=7
export ATM_LEVS=128
export ATM_REGIONAL=1
export ATM_HALO_BNDY=4
export ATM_HALO_BLEND=8
export ATM_SRC_CASE="C384"
export ATM_DST_CASE="C185"
export ATM_ICTYPE="gefsv13_replay" 
export ATM_BCTYPE="gefsv13_replay"

export ATM_NBDYINT=3 # Boundary input interval in hours

export CHGRES_EXEC="/scratch4/BMC/ufs-artic/Kristin.Barton/repos/hafs-community/UFS_UTILS/exec/chgres_cube"
export SYSTEM="ursa"
if [ $SYSTEM = "hera" ]; then
    export UFSUTILS_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/files/envs/UFS_UTILS"
elif [ $SYSTEM = "ursa" ]; then
    export UFSUTILS_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/repos/hafs-community/UFS_UTILS"
    #export UFSUTILS_DIR="/scratch4/BMC/ufs-artic/Kristin.Barton/repos/ufs-community/UFS_UTILS"
fi
